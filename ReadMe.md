# Разработка маршутизатора
### Команда Высший Пилотаж

## Принципиальная схема устройства

![alt text](image-5.png)

В хост OrangePI подключен USB концентратор

В концентратор по USB подключены два HackRF

Также подключен экран - для отладки (устройство может работать без него после запуска и настройки)

Два hackRF можно соеденить SMA кабелями для обесепечения связи тактов. Это опциональное решение, так как оно улучшит скорость передачи, но есть шанс появление петли шумов внутри устройства (нет места для должного экранирования кабеля)

Все устройства питаются от АКБ через хост

## Конфигурирование радиосигнала
Вы можете ознакомиться с параметрами и программной логикой в файлах репозитория.

## Процесс развертывания решения 
### 1. Установка Ubuntu на одноплатный компьютер Orange PI:

1. Загрузка образа с оффициального сайта
2. Запись образа на карту памяти для последующей загрузки устройства:
```shell
sudo dd if=/ubuntu.img of=/dev/sdX (X - буква устройства)
```
### 2. Установка GNU Radio
1. обновление пакетного менеджера
```shell
sudo apt update
```
2. установка пакета gnuradio
```shell
sudo apt install gnuradio
```
3. установка пакета hackrf для управлением HackRF One 
```shell
sudo apt install hackrf
```

### 3. Установка модуля поддержки OsmoSDR для GNU Radio
Из-за отсутствия последней версии модуля от компании Osmo внутри репозиториев Ubuntu Jammy (22) мы решили собрать данный модуль из исходного кода, благо мощности OrangePI на это вполне хватило
```shell
становка драйверов HackRF sudo apt install hackrf
Установка helper-модуля GR-OsmoSDR 
cd ~
git clone git://git.osmocom.org/gr-osmosdr
cd gr-osmosdr/
mkdir build
cd build/
cmake ../
make
sudo make install
sudo ldconfig
```
Последняя версия данного модуля обеспечит бесперебойную работу GNU Radio с HackRF. На некоторых форумах была информация о проблемах с запуском HackRF с использованием модуля gr-osmosdr из репозиториев Ubuntu.

## Характеристики подустройств

### HackRF One
    • 40 MHz to 6 GHz рабочая частота
    • полудуплексный режим работы
    • частота дискретизации до 20МГц
    • sampling 8 бит
    • совместим с GNU Radio
    • программно настраиваемый фильтр
    • программно настраиваемый усилитель
    • SMA разъем бля антенны
    • SMA разъемы для синхронизации 
    • Hi-Speed USB 2.0
    • open source hardware
 ### OrangePI Zero 2W
    • Процессор Allwinner H618 Quad-core Cortex-A7 
    • RAM 1024M DDR3(общая с графической)
    • Система Ubuntu XFCE


## Обоснование выбора компонентов
Мы выбрали HackRF One из-за его популярности и низкой цены. Данный радиомодуль очень ценится в сообществе радиолюбителей. Мы прочитали много информации на форумах от пользователей HackRF. Большинство людей было им довольны, поэтому мы тоже решили взять этот агрегат для использования в нашей платформе.

Мы выбрали OrangePI из-за его доступности, он довольно производителен, и намного популярнее чем его прародитель RaspberryPI. На оффициальном сайте OrangePI есть много документации, а так же много 